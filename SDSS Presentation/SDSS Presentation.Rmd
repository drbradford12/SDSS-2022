---
title: "Exploring Rural Shrink Smart Through Guided Discovery Dashboards"
author: "Denise R. Bradford and Susan R. Vanderplas, PhD"
date: "June 8, 2022"
output:
  xaringan::moon_reader:
    seal: false
    includes:
      in_footer: footer.html
      after_body:
        "js-addins.html"
    mathjax: "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_HTMLorMML"
    css: ["default", "metropolis-fonts", "metropolis" ,"css/modal.css", "css/sizeformat.css"]
    lib_dir: libs
    nature:
      highlightStyle: github
      highlightlines: true
      countIncrementalSlides: true
---
class:title-slide-custom

```{r, child = "style.Rmd"}
```

```{r setup, echo = FALSE, message = FALSE, warning = FALSE}
# Packages
library(emoji)
library(purrr)
library(tidyverse)
library(gridExtra)
library(nullabor)
library(scales)
library(knitr)
library(kableExtra)
library(RefManageR)
library(iconr)
library(fontawesome)
# download_fontawesome()

# References
bib <- ReadBib("bib/references.bib", check = FALSE)
ui <- "- "

# R markdown options
knitr::opts_chunk$set(echo = FALSE, 
                      message = FALSE, 
                      warning = FALSE, 
                      cache = FALSE,
                      dpi = 300)
options(htmltools.dir.version = FALSE)
options(knitr.kable.NA = '')
```

```{r, include = F, eval = T, cache = F}
clean_file_name <- function(x) {
  basename(x) %>% str_remove("\\..*?$") %>% str_remove_all("[^[A-z0-9_]]")
}
img_modal <- function(src, alt = "", id = clean_file_name(src), other = "") {
  
  other_arg <- paste0("'", as.character(other), "'") %>%
    paste(names(other), ., sep = "=") %>%
    paste(collapse = " ")
  
  js <- glue::glue("<script>
        /* Get the modal*/
          var modal{id} = document.getElementById('modal{id}');
        /* Get the image and insert it inside the modal - use its 'alt' text as a caption*/
          var img{id} = document.getElementById('img{id}');
          var modalImg{id} = document.getElementById('imgmodal{id}');
          var captionText{id} = document.getElementById('caption{id}');
          img{id}.onclick = function(){{
            modal{id}.style.display = 'block';
            modalImg{id}.src = this.src;
            captionText{id}.innerHTML = this.alt;
          }}
          /* When the user clicks on the modalImg, close it*/
          modalImg{id}.onclick = function() {{
            modal{id}.style.display = 'none';
          }}
</script>")
  
  html <- glue::glue(
     " <!-- Trigger the Modal -->
<img id='img{id}' src='{src}' alt='{alt}' {other_arg}>
<!-- The Modal -->
<div id='modal{id}' class='modal'>
  <!-- Modal Content (The Image) -->
  <img class='modal-content' id='imgmodal{id}'>
  <!-- Modal Caption (Image Text) -->
  <div id='caption{id}' class='modal-caption'></div>
</div>
"
  )
  write(js, file = "js-addins.html", append = T)
  return(html)
}
# Clean the file out at the start of the compilation
write("", file = "js-addins.html")
```

<br><br>
# Exploring Rural Shrink Smart Through Guided Discovery Dashboards
## SDSS 2022
### June 8, 2022
#### Denise Bradford
#### Department of Statistics, University of Nebraska - Lincoln 
##### `r fa("envelope", fill = "black")` [denise.bradford@huskers.unl.edu](denise.bradford@huskers.unl.edu) 
<!-- ##### `r fa("home", fill = "black")` [www.deniserbradford.com](https://www.deniserbradford.com/)  -->
##### `r fa("github", fill = "black")` [drbradford12](https://github.com/drbradford12)

<br><br><br>
.medium.emph[
Theme designed by Emily A. Robinson [www.emilyarobinson.com](https://www.emilyarobinson.com/)
]
???
Thank you for inviting me for a visit today and for attending my talk.

---
class:primary
# Outline

+ Introduction to Rural Shrink Smart Project with Iowa State University

+ Why Dashboards?

+ Dashboard Design and Guided Discovery Learning (GDL)

+ Parallel Coordinate Plots (PCPs) and the naive user

+ Data Collection and Feedback the loop

+ Future Work

???
In this talk today, I will provide a background of the Rural Shrink Smart Project. I will then provide a framework to way using a dashboard can be helpful to these population discovery of gaining insights from other towns. I will continue to discuss the usefulness of parallel coordinate plots on the naive user. I will conclude with future work.

---

# Rural Shrink Smart Project
.center[
![](Shrink_Smart_logo.png)
]
.center[
(https://ruralshrinksmart.org/)
]

- Rural towns are losing population steadily

  - Shrinking tax bases lead to fewer services
  - Shrinking population may shrink social interaction opportunities
  - Schools, businesses, etc. may move to nearby towns

---
# Rural Shrink Smart Project
.center[
![](Shrink_Smart_logo.png)
]
.center[
(https://ruralshrinksmart.org/)
]


- .red[Project Question:] How do some cities manage to maintain quality of life for residents amid shrinking populations?
  - Can this be taught?
  
.medium.emph[
This material is based upon work supported by the National Science Foundation under Grant No. 1952007. We would also like to thank our collaborators at Iowa State, the Iowa League of Cities, and the various Iowa government organizations which publish their data at (https://data.iowa.gov).
]

---
# Complications

- Quality of Life is a subjective assessment
  - Iowa Small Town poll has measured subjective QOL by decade for one small town in each of the 99 counties in Iowa (same town each year)
  - Survey response rates keep decreasing over time

- There are objective measures of things that contribute to QOL available in public datasets
.medium.emph[
- School ratings
- Town budgets for services
- Access to medical care, shopping, etc.
- Transportation trends
- Demographic shifts
- City level cooperative agreements with other government entities and NGOs
]

---
# Complications

- Quality of Life is a subjective assessment
  - Iowa Small Town poll has measured subjective QOL by decade for one small town in each of the 99 counties in Iowa (same town each year)
  - Survey response rates keep decreasing over time

- There are objective measures of things that contribute to QOL available in public datasets

- .red[Project Question:] How do we leverage .emph.cerulean[data science] and .emph.cerulean[exploratory data methods] to inform town leaders to reduce the shrinkage and maintain reliability?
    - Can traditional dashboard design of open source data be incorporated into overall decision-making?
    - Can we focus on estimating only things that objective measurements don't capture?
  
---
# Basic Idea

- Assemble publicly available data sets
    - Available over lots of different geographic measurements    
    Lat/Long, Zip code (5 or 9 digit, changes over time), Address, City, Census units, School District, County
    - May not be complete for small towns    
    (ACS estimates aren't useful in these areas - not enough people surveyed)

- Assess usability, interpretability and adaptability to new statistical methodology. 

- .emph.cerulean[The Rural Shrink Smart EDA dashboard incorporates two major components]: 
    - Data Visualization Interface component with Guided Discovery Learning (GDL) principles
    - Exploratory Data Analysis component utilizing statistical clustering methods.

---
# 

---
# Guiding Design Principles

Our initial set of dashboard design principles are: 

- The town leaders are the focus audience (central focus of the app)

- Facilitate comparisons with other towns in order to allow the user to explore other potential solutions

- Present the user with peer comparisons in order to widen the scope of exploration beyond the initial set of obvious peers in the local region.

- Allow for more detailed data and feature requests to improve the dashboard design over time.

---
# Guided Discovery Learning with Dashboard Design

We leverage the framework of Guided Discovery Learning (GDL) to guide the town leaders to make discoveries using our interactive visualization. By leveraging:

- hints

- feedback

- other helpful information to guide users in interactive exploration
    e.g. user ignoring the radio buttons to compare similar cities, etc.

---
# Dashboard Design Workflow

- Compile a single data set
    - rows: Each town
    - columns: Each variable with appropriate spatial aggregation    
    e.g. distance to service instead of lat/long

- Unsupervised analysis
    - Which towns are most similar based only on the public data?
 
- Dashboard layout
    - Which layout will allow the user to engage the most without overwhelming their curiosity?
   
- Dashboard Feedback
    - What elements on the dashboard are useful, confusing, misleading or incorrect from town leaders?
    
---
# Visualization

- Create a town-focused dashboard that lets leaders see how their town compares to other similar towns (geographically and as measured by the unsupervised statistical analysis)

- Goal is to help towns see what strategies for maintaining QOL work and don't

- Emphasis on things towns are empowered to change
    - Can't focus on e.g. agricultural policy
    - City budgets, partnerships with outside entities, services that matter and don't
    
- How do we best design charts/graphs/UI to make people feel empowered and help them explore the data with an open mind?
    - How do we incorporate statistical analyses into this? Much of the data will provide qualitative differences but not statistically significant differences.
    
---
# Dashboard Visual Iterations

- Version 1: An idea without limitations of the actual implementation pieces.

- Version 2: After implementation has been completed and the team notes limitations, we change the interface.

- Version 3: Now incorporate more literature on dashboard design and user experience, which removes some of the "cool" implementations 

- Version 4: Finally incorporate a collective feedback from team-leaders that suggests lack of understanding of information

---

# 
